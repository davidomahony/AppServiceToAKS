name: Provision General Infra
on: workflow_dispatch

jobs:
  tf_plan_and_apply:
    uses: davidomahony/SharedDeployment/.github/workflows/tfplan_apply.yml@main
    with:
      terraform_directory: "infra/General"
      terraform_version: '0.14.8'
      environment: dev
    secrets:
      ARM_CLIENT_ID: ${{ secrets.ARM_CLIENT_ID}}
      ARM_CLIENT_SECRET: ${{ secrets.ARM_CLIENT_SECRET }}
      ARM_SUBSCRIPTION_ID: ${{ secrets.ARM_SUBSCRIPTION_ID }}
      ARM_TENANT_ID: ${{ secrets.ARM_TENANT_ID }}